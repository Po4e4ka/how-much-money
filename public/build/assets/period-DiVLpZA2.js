import{c as se,j as t,r as x,u as at,H as nt,L as Be}from"./app-BzHtmxyF.js";import{T as rt,a as it,b as lt,A as ot}from"./app-layout-WIP4nGN4.js";import{d as Ae}from"./index-BDqSilVs.js";import{P as H,O as dt}from"./overlap-period-modal-BkBxCyEN.js";import{b as ct}from"./app-logo-icon-BDbBN7b9.js";/* empty css            */import"./index-Cyt8PL5y.js";import"./index-CsrVoxsz.js";const mt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xt=ct("CircleHelp",mt),ut=n=>{const e=se.c(14),{currentTitle:i,onConfirm:l,onCancel:a,confirmDisabled:s}=n,u=s===void 0?!1:s;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx("h3",{className:"font-display text-2xl",children:"Закрепить другой период?"}),e[0]=o):o=e[0];const f=i?`Сейчас закреплён период ${i}. Закрепить этот вместо него?`:"Сейчас уже есть закреплённый период. Закрепить этот вместо него?";let d;e[1]!==f?(d=t.jsx("p",{className:"mt-3 text-sm text-[#6a5d52] dark:text-white/70",children:f}),e[1]=f,e[2]=d):d=e[2];let p;e[3]!==a?(p=t.jsx(H,{type:"button",onClick:a,className:"px-4 py-2",children:"Отмена"}),e[3]=a,e[4]=p):p=e[4];let b;e[5]!==u||e[6]!==l?(b=t.jsx(H,{type:"button",onClick:l,tone:"success",className:"px-4 py-2",disabled:u,children:"Закрепить"}),e[5]=u,e[6]=l,e[7]=b):b=e[7];let g;e[8]!==p||e[9]!==b?(g=t.jsxs("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[p,b]}),e[8]=p,e[9]=b,e[10]=g):g=e[10];let c;return e[11]!==d||e[12]!==g?(c=t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:t.jsxs("div",{className:"w-full max-w-xl rounded-lg border border-black/10 bg-white/95 p-6 text-[#1c1a17] shadow-[0_24px_60px_-28px_rgba(0,0,0,0.7)] dark:border-white/10 dark:bg-[#1c1a17] dark:text-white",children:[o,d,g]})}),e[11]=d,e[12]=g,e[13]=c):c=e[13],c},ft=n=>{const e=se.c(10),{onConfirm:i,onCancel:l,confirmDisabled:a}=n,s=a===void 0?!1:a;let u,o;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("h3",{className:"font-display text-2xl",children:"Закрыть период?"}),o=t.jsx("p",{className:"mt-3 text-sm text-[#6a5d52] dark:text-white/70",children:"После закрытия период будет доступен только для просмотра. Редактировать данные больше нельзя."}),e[0]=u,e[1]=o):(u=e[0],o=e[1]);let f;e[2]!==l?(f=t.jsx(H,{type:"button",onClick:l,className:"px-4 py-2",children:"Отмена"}),e[2]=l,e[3]=f):f=e[3];let d;e[4]!==s||e[5]!==i?(d=t.jsx(H,{type:"button",onClick:i,tone:"success",className:"px-4 py-2",disabled:s,children:"Закрыть"}),e[4]=s,e[5]=i,e[6]=d):d=e[6];let p;return e[7]!==f||e[8]!==d?(p=t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:t.jsxs("div",{className:"w-full max-w-xl rounded-lg border border-black/10 bg-white/95 p-6 text-[#1c1a17] shadow-[0_24px_60px_-28px_rgba(0,0,0,0.7)] dark:border-white/10 dark:bg-[#1c1a17] dark:text-white",children:[u,o,t.jsxs("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[f,d]})]})}),e[7]=f,e[8]=d,e[9]=p):p=e[9],p};function pt(n){const e=se.c(14),{text:i,ariaLabel:l}=n,[a,s]=x.useState(!1),[u,o]=x.useState(!1);let f,d;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{if(typeof window>"u")return;const y=window.matchMedia("(hover: none) and (pointer: coarse)"),S=()=>s(y.matches);return S(),y.addEventListener("change",S),()=>y.removeEventListener("change",S)},d=[],e[0]=f,e[1]=d):(f=e[0],d=e[1]),x.useEffect(f,d);const p=a?u:void 0,b=l??"Подсказка";let g;e[2]!==a?(g=()=>{a&&o(ht)},e[2]=a,e[3]=g):g=e[3];let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(xt,{className:"h-4 w-4"}),e[4]=c):c=e[4];let N;e[5]!==b||e[6]!==g?(N=t.jsx(rt,{asChild:!0,children:t.jsx("button",{type:"button","aria-label":b,className:"inline-flex h-5 w-5 items-center justify-center rounded-full text-[#6a5d52] transition hover:text-[#1c1a17] dark:text-white/60 dark:hover:text-white",onClick:g,children:c})}),e[5]=b,e[6]=g,e[7]=N):N=e[7];let h;e[8]!==i?(h=t.jsx(it,{className:"max-w-xs text-xs leading-relaxed",children:i}),e[8]=i,e[9]=h):h=e[9];let w;return e[10]!==p||e[11]!==N||e[12]!==h?(w=t.jsxs(lt,{open:p,onOpenChange:o,children:[N,h]}),e[10]=p,e[11]=N,e[12]=h,e[13]=w):w=e[13],w}function ht(n){return!n}const ne=n=>{const e=se.c(9),{children:i,className:l,tooltipText:a,tooltipAriaLabel:s}=n,u=`text-xs uppercase tracking-[0.3em] text-[#6a5d52] dark:text-white/60 ${l??""}`;let o;e[0]!==i?(o=t.jsx("span",{children:i}),e[0]=i,e[1]=o):o=e[1];let f;e[2]!==s||e[3]!==a?(f=a?t.jsx("span",{className:"ml-2 inline-flex align-middle",children:t.jsx(pt,{text:a,ariaLabel:s??"Дополнительная информация"})}):null,e[2]=s,e[3]=a,e[4]=f):f=e[4];let d;return e[5]!==u||e[6]!==o||e[7]!==f?(d=t.jsxs("div",{className:u,children:[o,f]}),e[5]=u,e[6]=o,e[7]=f,e[8]=d):d=e[8],d},Ee=n=>{const e=se.c(3),{children:i,className:l}=n,a=`font-display text-2xl ${l??""}`;let s;return e[0]!==i||e[1]!==a?(s=t.jsx("div",{className:a,children:i}),e[0]=i,e[1]=a,e[2]=s):s=e[2],s},bt=n=>({"--delay":`${n}ms`}),gt={id:0,startDate:"",endDate:"",incomes:[],expenses:[],offIncomeExpenses:[],dailyExpenses:{},isPinned:!1,isClosed:!1},Z=n=>`${Math.max(0,Math.round(n)).toLocaleString("ru-RU")} ₽`,ge=n=>{const e=Math.round(n);return e===0?"0 ₽":`${e>0?"+":"−"}${Math.abs(e).toLocaleString("ru-RU")} ₽`},re=n=>{const[e,i,l]=n.split("-").map(Number);return new Date(e,(i??1)-1,l??1)},he=n=>{const e=re(n),i=String(e.getDate()).padStart(2,"0"),l=String(e.getMonth()+1).padStart(2,"0");return`${i}.${l}`},wt=n=>new Intl.DateTimeFormat("ru-RU",{month:"long",year:"numeric"}).format(re(n)),Le=(n,e)=>{if(!n)return"";const[i,l,a]=n.split("-").map(Number);if(!i||!l||!a)return"";const s=l-1+e,u=i+Math.floor(s/12),o=(s%12+12)%12,f=new Date(u,o+1,0).getDate(),d=Math.min(a,f),p=String(o+1).padStart(2,"0"),b=String(d).padStart(2,"0");return`${u}-${p}-${b}`},Re=(n,e)=>{const i=new Intl.DateTimeFormat("ru-RU",{month:"short"}),l=i.format(re(n)),a=i.format(re(e)),s=re(n).getFullYear(),u=re(e).getFullYear();return s===u?l===a?wt(n):`${l}–${a} ${s}`:`${l} ${s} – ${a} ${u}`},Ve=(n,e)=>{const i=re(n),a=re(e).getTime()-i.getTime(),s=Math.floor(a/(1e3*60*60*24));return Math.max(1,s+1)},yt=n=>{const e=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),l=String(n.getDate()).padStart(2,"0");return`${e}-${i}-${l}`},we=n=>{const e=n.replace(/\D/g,"");return e===""?"":Number(e)},ze=n=>n.filter(e=>e.name.trim()==="").map(e=>e.id),Ye=n=>{const e=se.c(3),{children:i,className:l}=n,a=`flex flex-wrap items-center gap-2 text-xs font-semibold sm:text-sm ${l??""}`;let s;return e[0]!==i||e[1]!==a?(s=t.jsx("div",{className:a,children:i}),e[0]=i,e[1]=a,e[2]=s):s=e[2],s},fe=n=>{const e=se.c(3),{children:i,className:l}=n,a=`inline-flex items-center font-display tabular-nums leading-[0.9] ${l??""}`;let s;return e[0]!==i||e[1]!==a?(s=t.jsx("span",{className:a,children:i}),e[0]=i,e[1]=a,e[2]=s):s=e[2],s},ve=n=>{const e=se.c(3),{children:i,className:l}=n,a=`inline-flex items-center leading-[0.9] relative -top-[1px] text-black/50 dark:text-white/60 ${l??""}`;let s;return e[0]!==i||e[1]!==a?(s=t.jsx("span",{className:a,children:i}),e[0]=i,e[1]=a,e[2]=s):s=e[2],s},kt=n=>{const e=se.c(27),{items:i,setItems:l,totalAmount:a,onAdd:s,onBlurField:u,invalidNameIds:o,readOnly:f}=n,d=f===void 0?!1:f;let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(ne,{children:"Приход"}),e[0]=p):p=e[0];let b;e[1]!==s||e[2]!==d?(b=t.jsxs("div",{className:"flex items-center justify-between",children:[p,t.jsx(H,{type:"button",onClick:s,disabled:d,children:"+ Строка"})]}),e[1]=s,e[2]=d,e[3]=b):b=e[3];let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsxs("div",{className:"mt-3 hidden grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)] items-center gap-2 text-[11px] uppercase tracking-[0.2em] text-[#6a5d52] dark:text-white/60 sm:grid",children:[t.jsx("span",{children:"Название"}),t.jsx("span",{className:"text-right",children:"Сумма"})]}),e[4]=g):g=e[4];let c;if(e[5]!==o||e[6]!==i||e[7]!==u||e[8]!==d||e[9]!==l){let E;e[11]!==o||e[12]!==u||e[13]!==d||e[14]!==l?(E=(_,z)=>t.jsxs("div",{className:"grid items-center gap-2 grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)]",children:[t.jsx("input",{type:"text",placeholder:`Приход ${z+1}`,value:_.name,disabled:d,onChange:F=>l(k=>k.map(I=>I.id===_.id?{...I,name:F.target.value}:I)),onBlur:u,className:`rounded-lg border bg-white/90 px-3 py-2 text-xs dark:bg-white/10 sm:px-4 sm:text-sm ${o.includes(_.id)?"border-[#b0352b] dark:border-[#ff8b7c]":"border-black/10 dark:border-white/10"}`}),t.jsx("input",{type:"number",min:0,step:1,inputMode:"numeric",value:_.amount,disabled:d,onChange:F=>{const k=F.target.value;l(I=>I.map(C=>C.id===_.id?{...C,amount:we(k)}:C))},onFocus:()=>{_.amount===0&&l(F=>F.map(k=>k.id===_.id?{...k,amount:""}:k))},onBlur:()=>{_.amount===""&&l(F=>F.map(k=>k.id===_.id?{...k,amount:0}:k)),u()},className:"no-spin rounded-lg border border-black/10 bg-white/90 px-3 py-2 text-xs text-right tabular-nums dark:border-white/10 dark:bg-white/10 sm:px-4 sm:text-sm"})]},_.id),e[11]=o,e[12]=u,e[13]=d,e[14]=l,e[15]=E):E=e[15],c=i.map(E),e[5]=o,e[6]=i,e[7]=u,e[8]=d,e[9]=l,e[10]=c}else c=e[10];let N;e[16]!==c?(N=t.jsx("div",{className:"mt-3 grid gap-2",children:c}),e[16]=c,e[17]=N):N=e[17];let h;e[18]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx("span",{children:"Итого прихода"}),e[18]=h):h=e[18];let w;e[19]!==a?(w=Z(a),e[19]=a,e[20]=w):w=e[20];let y;e[21]!==w?(y=t.jsxs("div",{className:"mt-3 grid items-center gap-2 rounded-lg border border-dashed border-black/10 bg-white/70 px-4 py-2 text-xs dark:border-white/10 dark:bg-white/5 grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)]",children:[h,t.jsx("span",{className:"text-right font-display text-sm tabular-nums",children:w})]}),e[21]=w,e[22]=y):y=e[22];let S;return e[23]!==b||e[24]!==N||e[25]!==y?(S=t.jsxs("div",{className:"rounded-lg border border-black/10 bg-white/80 px-5 py-4 text-sm shadow-[0_20px_40px_-26px_rgba(28,26,23,0.6)] dark:border-white/10 dark:bg-white/10",children:[b,g,N,y]}),e[23]=b,e[24]=N,e[25]=y,e[26]=S):S=e[26],S},jt=n=>{const e=se.c(71),{title:i,items:l,setItems:a,showDelete:s,onToggleDelete:u,totalLabel:o,totalPlanned:f,totalActual:d,totalDifference:p,idPrefix:b,onBlurField:g,onAfterDelete:c,readOnly:N}=n,h=N===void 0?!1:N;let w;e[0]!==i?(w=t.jsx(ne,{children:i}),e[0]=i,e[1]=w):w=e[1];let y;e[2]!==b||e[3]!==a?(y=()=>a(ce=>[...ce,{id:`${b}${Date.now()}`,name:"",plannedAmount:"",actualAmount:"",actualTouched:!1}]),e[2]=b,e[3]=a,e[4]=y):y=e[4];let S;e[5]!==h||e[6]!==y?(S=t.jsx(H,{type:"button",onClick:y,disabled:h,children:"+ Строка"}),e[5]=h,e[6]=y,e[7]=S):S=e[7];let E;e[8]!==u||e[9]!==h||e[10]!==s?(E=t.jsx(H,{type:"button",onClick:u,active:s,activeTone:"danger",disabled:h,children:"− Удаление"}),e[8]=u,e[9]=h,e[10]=s,e[11]=E):E=e[11];let _;e[12]!==S||e[13]!==E?(_=t.jsxs("div",{className:"flex items-center gap-2",children:[S,E]}),e[12]=S,e[13]=E,e[14]=_):_=e[14];let z;e[15]!==w||e[16]!==_?(z=t.jsxs("div",{className:"flex items-center justify-between",children:[w,_]}),e[15]=w,e[16]=_,e[17]=z):z=e[17];const F=`mt-3 grid items-center gap-2 text-[11px] uppercase tracking-[0.2em] text-[#6a5d52] dark:text-white/60 ${s?"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_auto]":"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_minmax(0,0.7fr)]"}`;let k,I,C;e[18]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsxs("span",{children:[t.jsx("span",{className:"sm:hidden",children:"Название"}),t.jsx("span",{className:"hidden sm:inline",children:"Название"})]}),k=t.jsx("span",{className:"text-right",children:"План"}),I=t.jsx("span",{className:"text-right",children:"Факт"}),e[18]=k,e[19]=I,e[20]=C):(k=e[18],I=e[19],C=e[20]);let U;e[21]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsxs("span",{className:"text-right",children:[t.jsx("span",{className:"sm:hidden",children:"Разн"}),t.jsx("span",{className:"hidden sm:inline",children:"Разница"})]}),e[21]=U):U=e[21];let Q;e[22]!==s?(Q=s&&t.jsx("span",{className:"text-center",children:"—"}),e[22]=s,e[23]=Q):Q=e[23];let L;e[24]!==Q||e[25]!==F?(L=t.jsxs("div",{className:F,children:[C,k,I,U,Q]}),e[24]=Q,e[25]=F,e[26]=L):L=e[26];let B;if(e[27]!==l||e[28]!==c||e[29]!==g||e[30]!==h||e[31]!==a||e[32]!==s){let ce;e[34]!==c||e[35]!==g||e[36]!==h||e[37]!==a||e[38]!==s?(ce=(v,ye)=>t.jsxs("div",{className:`grid items-center gap-2 ${s?"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_auto]":"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_minmax(0,0.7fr)]"}`,children:[t.jsx("input",{type:"text",placeholder:`Трата ${ye+1}`,value:v.name,disabled:h,onChange:O=>a(j=>j.map(ae=>ae.id===v.id?{...ae,name:O.target.value}:ae)),onBlur:g,className:"rounded-lg border border-black/10 bg-white/90 px-3 py-2 text-xs dark:border-white/10 dark:bg-white/10 sm:px-4 sm:text-sm"}),t.jsx("input",{type:"number",min:0,step:1,inputMode:"numeric",value:v.plannedAmount,disabled:h,onChange:O=>{const j=O.target.value;a(ae=>ae.map(te=>te.id===v.id?{...te,plannedAmount:we(j),actualAmount:te.actualTouched?te.actualAmount:we(j)}:te))},onFocus:()=>{v.plannedAmount===0&&a(O=>O.map(j=>j.id===v.id?{...j,plannedAmount:""}:j))},onBlur:()=>{v.plannedAmount===""&&a(O=>O.map(j=>j.id===v.id?{...j,plannedAmount:0}:j)),g()},className:"no-spin rounded-lg border border-black/10 bg-white/90 px-3 py-2 text-xs text-right tabular-nums dark:border-white/10 dark:bg-white/10 sm:px-4 sm:text-sm"}),t.jsx("input",{type:"number",min:0,step:1,inputMode:"numeric",value:v.actualAmount,disabled:h,onChange:O=>{const j=O.target.value;a(ae=>ae.map(te=>te.id===v.id?{...te,actualAmount:we(j),actualTouched:!0}:te))},onFocus:()=>{v.actualAmount===0&&a(O=>O.map(j=>j.id===v.id?{...j,actualAmount:""}:j))},onBlur:()=>{v.actualAmount===""&&a(O=>O.map(j=>j.id===v.id?{...j,actualAmount:0}:j)),g()},className:"no-spin rounded-lg border border-black/10 bg-white/90 px-3 py-2 text-xs text-right tabular-nums dark:border-white/10 dark:bg-white/10 sm:px-4 sm:text-sm"}),t.jsx("div",{className:`flex min-h-[36px] items-center justify-end px-0 py-2 text-xs tabular-nums sm:min-h-[40px] sm:px-4 sm:text-sm ${v.plannedAmount-v.actualAmount>0?"text-[#1e7b4f] dark:text-[#7ce0b3]":v.plannedAmount-v.actualAmount<0?"text-[#b0352b] dark:text-[#ff8b7c]":"text-[#6a5d52] dark:text-white/70"}`,children:ge(v.plannedAmount-v.actualAmount)}),s&&t.jsx("button",{type:"button",onClick:()=>{window.confirm("Удалить строку?")&&(a(O=>O.filter(j=>j.id!==v.id)),c())},"aria-label":`Удалить трату ${ye+1}`,className:"flex h-8 w-8 items-center justify-center rounded-full text-xs text-[#b0352b] transition hover:bg-[#b0352b]/10 dark:text-[#ff8b7c] dark:hover:bg-[#ff8b7c]/15",disabled:h,children:"—"})]},v.id),e[34]=c,e[35]=g,e[36]=h,e[37]=a,e[38]=s,e[39]=ce):ce=e[39],B=l.map(ce),e[27]=l,e[28]=c,e[29]=g,e[30]=h,e[31]=a,e[32]=s,e[33]=B}else B=e[33];let D;e[40]!==B?(D=t.jsx("div",{className:"mt-3 grid gap-2",children:B}),e[40]=B,e[41]=D):D=e[41];const ee=`mt-3 grid items-center gap-2 rounded-lg border border-dashed border-black/10 bg-white/70 px-4 py-2 text-xs dark:border-white/10 dark:bg-white/5 ${s?"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_auto]":"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_minmax(0,0.7fr)_minmax(0,0.7fr)]"}`;let Y;e[42]!==o?(Y=t.jsx("span",{children:o}),e[42]=o,e[43]=Y):Y=e[43];let X;e[44]!==f?(X=Z(f),e[44]=f,e[45]=X):X=e[45];let K;e[46]!==X?(K=t.jsx("span",{className:"text-right font-display text-sm tabular-nums",children:X}),e[46]=X,e[47]=K):K=e[47];let T;e[48]!==d?(T=Z(d),e[48]=d,e[49]=T):T=e[49];let W;e[50]!==T?(W=t.jsx("span",{className:"text-right font-display text-sm tabular-nums",children:T}),e[50]=T,e[51]=W):W=e[51];const R=`text-right font-display text-sm tabular-nums ${p>0?"text-[#1e7b4f] dark:text-[#7ce0b3]":p<0?"text-[#b0352b] dark:text-[#ff8b7c]":"text-[#6a5d52] dark:text-white/70"}`;let $;e[52]!==p?($=ge(p),e[52]=p,e[53]=$):$=e[53];let q;e[54]!==R||e[55]!==$?(q=t.jsx("span",{className:R,children:$}),e[54]=R,e[55]=$,e[56]=q):q=e[56];let J;e[57]!==s?(J=s&&t.jsx("span",{}),e[57]=s,e[58]=J):J=e[58];let de;e[59]!==ee||e[60]!==Y||e[61]!==K||e[62]!==W||e[63]!==q||e[64]!==J?(de=t.jsxs("div",{className:ee,children:[Y,K,W,q,J]}),e[59]=ee,e[60]=Y,e[61]=K,e[62]=W,e[63]=q,e[64]=J,e[65]=de):de=e[65];let ie;return e[66]!==L||e[67]!==D||e[68]!==de||e[69]!==z?(ie=t.jsxs("div",{className:"rounded-lg border border-black/10 bg-white/80 px-5 py-4 text-sm shadow-[0_20px_40px_-26px_rgba(28,26,23,0.6)] dark:border-white/10 dark:bg-white/10",children:[z,L,D,de]}),e[66]=L,e[67]=D,e[68]=de,e[69]=z,e[70]=ie):ie=e[70],ie},Nt=n=>{const e=se.c(58),{title:i,items:l,setItems:a,showDelete:s,onToggleDelete:u,totalLabel:o,totalAmount:f,idPrefix:d,onBlurField:p,onAfterDelete:b,readOnly:g}=n,c=g===void 0?!1:g;let N;e[0]!==i?(N=t.jsx(ne,{tooltipText:"Эти траты не учитываются в расчётах.",tooltipAriaLabel:"Сторонние траты",children:i}),e[0]=i,e[1]=N):N=e[1];let h;e[2]!==d||e[3]!==a?(h=()=>a(K=>[...K,{id:`${d}${Date.now()}`,name:"",amount:""}]),e[2]=d,e[3]=a,e[4]=h):h=e[4];let w;e[5]!==c||e[6]!==h?(w=t.jsx(H,{type:"button",onClick:h,disabled:c,children:"+ Строка"}),e[5]=c,e[6]=h,e[7]=w):w=e[7];let y;e[8]!==u||e[9]!==c||e[10]!==s?(y=t.jsx(H,{type:"button",onClick:u,active:s,activeTone:"danger",disabled:c,children:"− Удаление"}),e[8]=u,e[9]=c,e[10]=s,e[11]=y):y=e[11];let S;e[12]!==w||e[13]!==y?(S=t.jsxs("div",{className:"flex items-center gap-2",children:[w,y]}),e[12]=w,e[13]=y,e[14]=S):S=e[14];let E;e[15]!==N||e[16]!==S?(E=t.jsxs("div",{className:"flex items-center justify-between",children:[N,S]}),e[15]=N,e[16]=S,e[17]=E):E=e[17];const _=`mt-3 hidden items-center gap-2 text-[11px] uppercase tracking-[0.2em] text-[#6a5d52] dark:text-white/60 sm:grid ${s?"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_auto]":"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)]"}`;let z,F;e[18]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("span",{children:"Название"}),z=t.jsx("span",{className:"text-right",children:"Сумма"}),e[18]=z,e[19]=F):(z=e[18],F=e[19]);let k;e[20]!==s?(k=s&&t.jsx("span",{className:"text-center",children:"—"}),e[20]=s,e[21]=k):k=e[21];let I;e[22]!==k||e[23]!==_?(I=t.jsxs("div",{className:_,children:[F,z,k]}),e[22]=k,e[23]=_,e[24]=I):I=e[24];let C;if(e[25]!==l||e[26]!==b||e[27]!==p||e[28]!==c||e[29]!==a||e[30]!==s){let K;e[32]!==b||e[33]!==p||e[34]!==c||e[35]!==a||e[36]!==s?(K=(T,W)=>t.jsxs("div",{className:`grid items-center gap-2 ${s?"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_auto]":"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)]"}`,children:[t.jsx("input",{type:"text",placeholder:`Трата ${W+1}`,value:T.name,disabled:c,onChange:R=>a($=>$.map(q=>q.id===T.id?{...q,name:R.target.value}:q)),onBlur:p,className:"rounded-lg border border-black/10 bg-white/90 px-3 py-2 text-xs dark:border-white/10 dark:bg-white/10 sm:px-4 sm:text-sm"}),t.jsx("input",{type:"number",min:0,step:1,inputMode:"numeric",value:T.amount,disabled:c,onChange:R=>{const $=R.target.value;a(q=>q.map(J=>J.id===T.id?{...J,amount:we($)}:J))},onFocus:()=>{T.amount===0&&a(R=>R.map($=>$.id===T.id?{...$,amount:""}:$))},onBlur:()=>{T.amount===""&&a(R=>R.map($=>$.id===T.id?{...$,amount:0}:$)),p()},className:"no-spin rounded-lg border border-black/10 bg-white/90 px-3 py-2 text-xs text-right tabular-nums text-[#b0352b] dark:border-white/10 dark:bg-white/10 dark:text-[#ff8b7c] sm:px-4 sm:text-sm"}),s&&t.jsx("button",{type:"button",onClick:()=>{window.confirm("Удалить строку?")&&(a(R=>R.filter($=>$.id!==T.id)),b())},"aria-label":`Удалить трату ${W+1}`,className:"flex h-8 w-8 items-center justify-center rounded-full text-xs text-[#b0352b] transition hover:bg-[#b0352b]/10 dark:text-[#ff8b7c] dark:hover:bg-[#ff8b7c]/15",disabled:c,children:"—"})]},T.id),e[32]=b,e[33]=p,e[34]=c,e[35]=a,e[36]=s,e[37]=K):K=e[37],C=l.map(K),e[25]=l,e[26]=b,e[27]=p,e[28]=c,e[29]=a,e[30]=s,e[31]=C}else C=e[31];let U;e[38]!==C?(U=t.jsx("div",{className:"mt-3 grid gap-2",children:C}),e[38]=C,e[39]=U):U=e[39];const Q=`mt-3 grid items-center gap-2 rounded-lg border border-dashed border-black/10 bg-white/70 px-4 py-2 text-xs dark:border-white/10 dark:bg-white/5 ${s?"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)_auto]":"grid-cols-[minmax(0,1.2fr)_minmax(0,0.7fr)]"}`;let L;e[40]!==o?(L=t.jsx("span",{children:o}),e[40]=o,e[41]=L):L=e[41];let B;e[42]!==f?(B=Z(f),e[42]=f,e[43]=B):B=e[43];let D;e[44]!==B?(D=t.jsx("span",{className:"text-right font-display text-sm tabular-nums text-[#b0352b] dark:text-[#ff8b7c]",children:B}),e[44]=B,e[45]=D):D=e[45];let ee;e[46]!==s?(ee=s&&t.jsx("span",{}),e[46]=s,e[47]=ee):ee=e[47];let Y;e[48]!==Q||e[49]!==L||e[50]!==D||e[51]!==ee?(Y=t.jsxs("div",{className:Q,children:[L,D,ee]}),e[48]=Q,e[49]=L,e[50]=D,e[51]=ee,e[52]=Y):Y=e[52];let X;return e[53]!==I||e[54]!==U||e[55]!==Y||e[56]!==E?(X=t.jsxs("div",{className:"rounded-lg border border-black/10 bg-white/80 px-5 py-4 text-sm shadow-[0_20px_40px_-26px_rgba(28,26,23,0.6)] dark:border-white/10 dark:bg-white/10",children:[E,I,U,Y]}),e[53]=I,e[54]=U,e[55]=Y,e[56]=E,e[57]=X):X=e[57],X};function It(){const{periodId:n}=at().props,[e,i]=x.useState(gt),[l,a]=x.useState([]),[s,u]=x.useState(""),[o,f]=x.useState(""),[d,p]=x.useState([]),[b,g]=x.useState([]),[c,N]=x.useState({}),[h,w]=x.useState(!1),[y,S]=x.useState(!1),[E,_]=x.useState(!0),[z,F]=x.useState(null),[k,I]=x.useState(!1),[C,U]=x.useState(null),[Q,L]=x.useState(!1),[B,D]=x.useState(null),[ee,Y]=x.useState(!1),[X,K]=x.useState([]),[T,W]=x.useState(!1),[R,$]=x.useState(!1),[q,J]=x.useState(!1),[de,ie]=x.useState(!1),[ce,v]=x.useState(!1),[ye,O]=x.useState(),j=x.useRef(!1),[ae,te]=x.useState(0),Ie="Заполните названия прихода.",Te=x.useMemo(()=>`period:${n}`,[n]),_e=x.useRef(!1),Se=x.useRef(!1),Ke=()=>typeof window>"u"?null:window.__periodCache?.[Te]??null,ke=r=>{if(typeof window>"u")return;const m=window;m.__periodCache||(m.__periodCache={}),m.__periodCache[Te]=r},je=(d??[]).reduce((r,m)=>r+(Number(m.plannedAmount)||0),0),Pe=(d??[]).reduce((r,m)=>r+(Number(m.actualAmount)||0),0),xe=je-Pe,qe=(b??[]).reduce((r,m)=>r+(Number(m.amount)||0),0),Ce=(l??[]).reduce((r,m)=>r+(Number(m.amount)||0),0),me=x.useMemo(()=>!s||!o?0:Ve(s,o),[s,o]),be=x.useMemo(()=>Object.values(c).reduce((r,m)=>r+(m||0),0),[c]),Ne=x.useMemo(()=>{if(!s||!o)return 0;const r=re(s),m=re(o);if(!Number.isFinite(r.getTime())||!Number.isFinite(m.getTime()))return 0;let G=0;const A=new Date(r);for(;A<=m;){const V=yt(A);c[V]!==void 0&&(G+=1),A.setDate(A.getDate()+1)}return G},[c,s,o]),Ue=Ne>0?be/Ne:0,De=x.useMemo(()=>!s||!o?"Период":`${he(s)} — ${he(o)}`,[s,o]),He=x.useMemo(()=>!s||!o?"":`${me} дней · ${Re(s,o)}`,[me,s,o]),ue=Ce-je,Xe=me>0?ue/me:0,Me=ue+xe-be,$e=Math.max(0,me-Ne),Je=$e>0?Me/$e:0,Ge=me>0&&Ne>=me,pe=e.isClosed,Qe=[{title:"Dashboard",href:Ae().url},{title:De,href:`/periods/${n}`}],We=r=>!!(r&&r.id&&Array.isArray(r.incomes)&&Array.isArray(r.expenses)&&Array.isArray(r.offIncomeExpenses)),Ze=async()=>{if(Se.current)return;const r=Ke();if(!(We(r)&&(i({...r,isClosed:!!r.isClosed}),a(r.incomes??[]),u(r.startDate??""),f(r.endDate??""),p(r.expenses??[]),g(r.offIncomeExpenses??[]),N(r.dailyExpenses??{}),_(!1),typeof navigator<"u"&&!navigator.onLine))&&!(_e.current&&(!navigator.onLine||!r))){Se.current=!0,_(!0),F(null);try{const m=await fetch(`/api/periods/${n}`);if(!m.ok)throw new Error("Не удалось загрузить период.");const A=(await m.json()).data,V={id:A.id,startDate:A.start_date,endDate:A.end_date,dailyExpenses:A.daily_expenses??{},isPinned:!!A.is_pinned,isClosed:!!A.is_closed,incomes:A.incomes.map(P=>({id:String(P.id),name:P.name,amount:P.amount})),expenses:A.expenses.map(P=>({id:String(P.id),name:P.name,plannedAmount:P.planned_amount,actualAmount:P.actual_amount,actualTouched:!1})),offIncomeExpenses:A.external_expenses.map(P=>({id:String(P.id),name:P.name,amount:P.amount}))};i(V),a(V.incomes),u(V.startDate),f(V.endDate),p(V.expenses),g(V.offIncomeExpenses),N(V.dailyExpenses),ie(!1),O(void 0),ke(V),_e.current=!0}catch(m){F(m instanceof Error?m.message:"Не удалось загрузить период.")}finally{_(!1),Se.current=!1}}},le=async(r=!1,m)=>{if(e.isClosed)return;const G=m?.startDate??s,A=m?.endDate??o,V=ze(l);if(V.length>0){K(V),D(Ie);return}if(k){j.current=!0;return}I(!0),D(null),Y(!1);try{const P=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",oe=await fetch(`/api/periods/${n}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":P},body:JSON.stringify({start_date:G,end_date:A,daily_expenses:c,force:r,incomes:l.map(M=>({id:Number.isFinite(Number(M.id))?Number(M.id):void 0,name:M.name,amount:Number(M.amount)||0})),expenses:d.map(M=>({id:Number.isFinite(Number(M.id))?Number(M.id):void 0,name:M.name,planned_amount:Number(M.plannedAmount)||0,actual_amount:Number(M.actualAmount)||0})),external_expenses:b.map(M=>({id:Number.isFinite(Number(M.id))?Number(M.id):void 0,name:M.name,amount:Number(M.amount)||0}))})});if(oe.status===409){const M=await oe.json();if(M.overlap){U(M.overlap),L(!0);return}throw new Error("Период пересекается с существующим.")}if(!oe.ok){if(oe.status===423){const M=await oe.json();throw new Error(M.message??"Период закрыт и не редактируется.")}throw new Error("Не удалось сохранить период.")}Y(!0),U(null),L(!1),ke({id:Number(n),startDate:G,endDate:A,incomes:l,expenses:d,offIncomeExpenses:b,dailyExpenses:c,isPinned:e.isPinned,isClosed:e.isClosed})}catch(P){D(P instanceof Error?P.message:"Не удалось сохранить период.")}finally{I(!1)}},et=()=>{e.isClosed||(a(r=>[...r,{id:`i${Date.now()}`,name:"",amount:""}]),le())},Fe=()=>{te(r=>r+1)},tt=async()=>{if(!T&&window.confirm("Удалить период?")){W(!0),D(null);try{const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"";if(!(await fetch(`/api/periods/${n}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":r}})).ok)throw new Error("Не удалось удалить период.");window.location.href=Ae().url}catch(r){D(r instanceof Error?r.message:"Не удалось удалить период.")}finally{W(!1)}}},st=async()=>{if(!(q||e.isClosed)){J(!0),D(null);try{const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",m=await fetch(`/api/periods/${n}/close`,{method:"POST",headers:{"X-CSRF-TOKEN":r}});if(!m.ok){const V=await m.json();throw new Error(V.message??"Не удалось закрыть период.")}const G=await m.json(),A={...e,isClosed:G.data?.is_closed??!0};i(A),v(!1),ke({id:Number(n),startDate:s,endDate:o,incomes:l,expenses:d,offIncomeExpenses:b,dailyExpenses:c,isPinned:e.isPinned,isClosed:A.isClosed})}catch(r){D(r instanceof Error?r.message:"Не удалось закрыть период.")}finally{J(!1)}}},Oe=async(r=!1)=>{if(!R){$(!0);try{const m=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",G=await fetch(`/api/periods/${n}/pin`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":m},body:JSON.stringify({pinned:!e.isPinned,force:r})});if(G.status===409){const oe=await G.json();oe.pinned?O(`${he(oe.pinned.start_date)} — ${he(oe.pinned.end_date)}`):O(void 0),ie(!0);return}if(!G.ok)throw new Error("Не удалось изменить закрепление периода.");const V=(await G.json()).data?.is_pinned??!e.isPinned,P={...e,isPinned:V};i(P),ke(P),ie(!1)}catch(m){D(m instanceof Error?m.message:"Не удалось изменить закрепление периода.")}finally{$(!1)}}};return x.useEffect(()=>{_e.current=!1,Ze()},[n]),x.useEffect(()=>{!k&&j.current&&(j.current=!1,le())},[k]),x.useEffect(()=>{ae>0&&le()},[ae]),x.useEffect(()=>{const r=ze(l);K(r),r.length===0&&B===Ie&&D(null)},[l,B]),t.jsxs(ot,{breadcrumbs:Qe,children:[t.jsx(nt,{title:De}),t.jsxs("div",{className:"relative flex flex-1 flex-col gap-8 overflow-x-hidden rounded-xl p-3 font-body text-[#1c1a17] dark:text-[#f7f3ee]",children:[t.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-3xl bg-aurora opacity-35 dark:hidden"}),t.jsx("div",{className:"pointer-events-none absolute inset-0 hidden rounded-3xl bg-aurora-night opacity-45 dark:block"}),t.jsxs("section",{className:"relative z-10 flex flex-wrap items-center justify-between gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-[#6a5d52] dark:text-white/60",children:"Период"}),t.jsx("h1",{className:"mt-3 font-display text-3xl",children:De}),t.jsx("p",{className:"mt-2 text-sm text-[#6a5d52] dark:text-white/70",children:He})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx(H,{type:"button",onClick:()=>Oe(!1),tone:e.isPinned?"danger":"success",disabled:R,className:"px-4 py-2",children:e.isPinned?"Открепить":"Закрепить"}),Ge&&!e.isClosed&&t.jsx(H,{type:"button",onClick:()=>v(!0),disabled:q,tone:"success",className:"px-4 py-2",children:"Закрыть период"}),t.jsx(H,{type:"button",onClick:tt,disabled:T,tone:"danger",className:"px-4 py-2",children:"Удалить"}),t.jsx(Be,{href:Ae(),prefetch:!0,className:"rounded-full border border-black/10 bg-white/80 px-4 py-2 text-xs text-[#1c1a17] shadow-[0_16px_32px_-24px_rgba(28,26,23,0.6)] transition hover:-translate-y-0.5 dark:border-white/10 dark:bg-white/10 dark:text-white",children:"← Ко всем периодам"})]})]}),t.jsxs("section",{className:"relative z-10 grid gap-6 lg:grid-cols-[1.1fr_0.9fr] animate-reveal",style:bt(120),children:[E&&t.jsx("div",{className:"col-span-full rounded-lg border border-black/10 bg-white/70 px-5 py-4 text-sm text-[#6a5d52] dark:border-white/10 dark:bg-white/10 dark:text-white/70",children:"Загружаем период..."}),z&&t.jsx("div",{className:"col-span-full rounded-lg border border-black/10 bg-white/70 px-5 py-4 text-sm text-[#b0352b] dark:border-white/10 dark:bg-white/10 dark:text-[#ff8b7c]",children:z}),t.jsxs("div",{className:"order-2 grid gap-4 lg:order-none",children:[t.jsx(kt,{items:l,setItems:a,totalAmount:Ce,onAdd:et,onBlurField:le,invalidNameIds:X,readOnly:pe}),t.jsx(jt,{title:"Обязательные траты",items:d,setItems:p,showDelete:h,onToggleDelete:()=>w(r=>!r),totalLabel:"Итого обязательных",totalPlanned:je,totalActual:Pe,totalDifference:xe,idPrefix:"e",onBlurField:le,onAfterDelete:Fe,readOnly:pe}),t.jsx(Nt,{title:"Сторонние траты",items:b,setItems:g,showDelete:h,onToggleDelete:()=>w(r=>!r),totalLabel:"Итого сторонних",totalAmount:qe,idPrefix:"o",onBlurField:le,onAfterDelete:Fe,readOnly:pe})]}),t.jsxs("div",{className:"order-1 grid gap-4 lg:order-none",children:[t.jsxs("div",{className:"rounded-lg border border-black/10 bg-white/80 px-5 py-4 text-sm shadow-[0_20px_40px_-26px_rgba(28,26,23,0.6)] dark:border-white/10 dark:bg-white/10",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ne,{children:"Дни периода"}),t.jsx(H,{type:"button",onClick:()=>S(r=>!r),active:y,activeTone:"success",disabled:pe,children:y?"Готово":"Редактировать"})]}),t.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[t.jsx("div",{className:"px-1 text-base font-semibold tabular-nums",children:me}),t.jsx("span",{className:"text-xs text-[#6a5d52] dark:text-white/60",children:"дней"})]}),y&&t.jsxs("div",{className:"mt-3 grid gap-2 grid-cols-2",children:[t.jsxs("label",{className:"grid gap-1 text-xs text-[#6a5d52] dark:text-white/60",children:["Начало",t.jsx("input",{type:"date",value:s,disabled:pe,onChange:r=>{const m=r.target.value;u(m),le(!1,{startDate:m})},min:o?Le(o,-3):void 0,max:o,className:"rounded-lg border border-black/10 bg-white/90 px-3 py-2 text-xs dark:border-white/10 dark:bg-white/10 sm:text-sm"})]}),t.jsxs("label",{className:"grid gap-1 text-xs text-[#6a5d52] dark:text-white/60",children:["Конец",t.jsx("input",{type:"date",value:o,disabled:pe,onChange:r=>{const m=r.target.value;f(m),le(!1,{endDate:m})},min:s,max:s?Le(s,3):void 0,className:"rounded-lg border border-black/10 bg-white/90 px-3 py-2 text-xs dark:border-white/10 dark:bg-white/10 sm:text-sm"})]})]})]}),t.jsx(Be,{href:`/periods/${n}/daily`,prefetch:!0,className:"group rounded-lg border border-[#1e7b4f]/30 bg-white/90 px-5 py-4 text-sm text-[#1c1a17] shadow-[0_24px_48px_-28px_rgba(30,123,79,0.55)] transition hover:-translate-y-0.5 hover:shadow-[0_28px_60px_-30px_rgba(30,123,79,0.65)] dark:border-[#7ce0b3]/30 dark:bg-white/10 dark:text-white",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsx(ne,{children:"Ежедневные траты"}),t.jsx(H,{as:"span",children:"Перейти к дневным значениям"})]})}),t.jsxs("div",{className:"rounded-lg border border-black/10 bg-white/85 px-5 py-6 text-[#1c1a17] shadow-[0_20px_40px_-26px_rgba(28,26,23,0.6)] dark:border-white/10 dark:bg-[#1c1a17] dark:text-white dark:shadow-[0_20px_40px_-26px_rgba(0,0,0,0.7)]",children:[t.jsx(ne,{children:"Планируемое среднее в день"}),t.jsx("p",{className:"mt-2 text-xs text-[#6a5d52] dark:text-white/60",children:"(Приход − обязательные) / дни"}),t.jsx(Ee,{className:"mt-3",children:Z(Xe)}),t.jsxs("div",{className:"mt-4 grid gap-3 text-xs text-[#6a5d52] dark:text-white/70",children:[t.jsx("div",{className:"h-px w-full bg-black/10 dark:bg-white/10"}),t.jsx(ne,{children:"Планируемая сумма на период"}),t.jsxs(Ye,{children:[t.jsx(fe,{className:"text-[#1e7b4f] dark:text-[#7ce0b3]",children:Z(Ce)}),t.jsx(ve,{children:"−"}),t.jsx(fe,{className:"text-[#b0352b] dark:text-[#ff8b7c]",children:Z(je)}),t.jsx(ve,{children:"="}),t.jsx(fe,{className:`${ue>=0?"text-[#1e7b4f] dark:text-[#7ce0b3]":"text-[#b0352b] dark:text-[#ff8b7c]"}`,children:ge(ue)})]}),t.jsx("div",{className:"text-[11px] uppercase tracking-[0.2em] text-[#6a5d52] dark:text-white/60",children:"Приход − план = сумма в период"})]})]}),t.jsxs("div",{className:"rounded-lg border border-black/10 bg-white/85 px-5 py-6 text-[#1c1a17] shadow-[0_20px_40px_-26px_rgba(28,26,23,0.6)] dark:border-white/10 dark:bg-[#1c1a17] dark:text-white dark:shadow-[0_20px_40px_-26px_rgba(0,0,0,0.7)]",children:[t.jsx(ne,{tooltipText:"Фактический остаток / количество незаполненных (непрошедших) дней",children:"Расчётное в день на оставшиеся дни"}),t.jsxs("p",{className:"mt-2 text-xs text-[#6a5d52] dark:text-white/60",children:["(",Z(Me)," / ",$e||0," д.)"]}),t.jsx(Ee,{className:"mt-3",children:Z(Je)})]}),t.jsxs("div",{className:"rounded-lg border border-black/10 bg-white/85 px-5 py-6 text-[#1c1a17] shadow-[0_20px_40px_-26px_rgba(28,26,23,0.6)] dark:border-white/10 dark:bg-[#1c1a17] dark:text-white dark:shadow-[0_20px_40px_-26px_rgba(0,0,0,0.7)]",children:[t.jsx(ne,{tooltipText:"Планируемый остаток +/− фактическая разница − ежедневные траты за период.",tooltipAriaLabel:"Формула фактического остатка",children:"Фактический остаток"}),t.jsxs(Ye,{className:"mt-3",children:[t.jsx(fe,{className:"text-[#1e7b4f] dark:text-[#7ce0b3]",children:Z(ue)}),t.jsx(fe,{className:`${xe>0?"text-[#1e7b4f] dark:text-[#7ce0b3]":xe<0?"text-[#b0352b] dark:text-[#ff8b7c]":"text-[#6a5d52] dark:text-white/70"}`,children:ge(xe).replace(/^([+−-])/,"$1 ")}),t.jsx(ve,{children:"−"}),t.jsx(fe,{className:"text-[#b0352b] dark:text-[#ff8b7c]",children:Z(be)}),t.jsx(ve,{children:"="}),t.jsx(fe,{className:`${ue+xe-be>=0?"text-[#1e7b4f] dark:text-[#7ce0b3]":"text-[#b0352b] dark:text-[#ff8b7c]"}`,children:ge(ue+xe-be)})]}),t.jsx("div",{className:"mt-4 h-px w-full bg-black/10 dark:bg-white/10"}),t.jsx(ne,{className:"mt-4",children:"Фактическое среднее в день за период"}),t.jsx(Ee,{className:"mt-2",children:Z(Ue)})]})]})]}),de&&t.jsx(ut,{currentTitle:ye,onCancel:()=>ie(!1),onConfirm:()=>Oe(!0),confirmDisabled:R}),ce&&t.jsx(ft,{onCancel:()=>v(!1),onConfirm:st,confirmDisabled:q}),C&&t.jsx(dt,{href:`/periods/${C.id}`,title:`${he(C.start_date)} — ${he(C.end_date)}`,subtitle:`${Ve(C.start_date,C.end_date)} дней · ${Re(C.start_date,C.end_date)}`,onClose:()=>{U(null),L(!1)},onConfirm:()=>le(!0),confirmDisabled:!Q||k}),B&&t.jsx("div",{className:"relative z-10 rounded-lg border border-black/10 bg-white/70 px-5 py-3 text-xs text-[#b0352b] dark:border-white/10 dark:bg-white/10 dark:text-[#ff8b7c]",children:B})]})]})}export{It as default};
