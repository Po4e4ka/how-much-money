import{c as se,u as re,r as ne,j as s,H as le,L as oe}from"./app-Bx4ID9nA.js";import{A as ie}from"./app-layout-DnKK-B0a.js";import{d as de}from"./index-BDqSilVs.js";/* empty css            */import"./app-logo-icon-BQ3z4SqQ.js";import"./index-Dxa0X5Dj.js";import"./index-DzM5uFWB.js";const ce=e=>({"--delay":`${e}ms`}),V=[{id:"p3",title:"05.02 — 20.02",subtitle:"16 дней · Февраль 2026",startDate:"2026-02-05",endDate:"2026-02-20",dailyExpenses:{"2026-02-05":12e3,"2026-02-06":18e3,"2026-02-07":9e3,"2026-02-08":15e3,"2026-02-10":22e3}},{id:"p2",title:"20.01 — 04.02",subtitle:"16 дней · Янв–Фев 2026",startDate:"2026-01-20",endDate:"2026-02-04",dailyExpenses:{"2026-01-20":14e3,"2026-01-21":16e3,"2026-01-23":12e3,"2026-01-27":19e3,"2026-02-01":13e3}},{id:"p1",title:"05.01 — 20.01",subtitle:"16 дней · Январь 2026",startDate:"2026-01-05",endDate:"2026-01-20",dailyExpenses:{"2026-01-05":9e3,"2026-01-06":11e3,"2026-01-10":7e3,"2026-01-15":8e3,"2026-01-19":12e3}}],X=e=>`${Math.max(0,Math.round(e)).toLocaleString("ru-RU")} ₽`,d=e=>{const[r,a,t]=e.split("-").map(Number);return new Date(r,(a??1)-1,t??1)},Z=e=>{const r=d(e),a=String(r.getDate()).padStart(2,"0"),t=String(r.getMonth()+1).padStart(2,"0");return`${a}.${t}`},me=e=>new Intl.DateTimeFormat("ru-RU",{month:"long",year:"numeric"}).format(d(e)),xe=(e,r)=>{const a=new Intl.DateTimeFormat("ru-RU",{month:"short"}),t=a.format(d(e)),n=a.format(d(r)),l=d(e).getFullYear(),o=d(r).getFullYear();return l===o?t===n?me(e):`${t}–${n} ${l}`:`${t} ${l} – ${n} ${o}`},pe=(e,r)=>{const a=d(e),n=d(r).getTime()-a.getTime(),l=Math.floor(n/(1e3*60*60*24));return Math.max(1,l+1)},H=e=>{const r=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${r}-${a}-${t}`},he=e=>{const r=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],a=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0"),n=(e.getDay()+6)%7;return`${r[n]}, ${a}.${t}`},P=(e,r)=>{const a=new Date(e);return a.setDate(a.getDate()+r),a},fe=(e,r)=>{const a=d(e),t=d(r),n=[];let l=new Date(a);for(;l<=t;){const o=[],m=(7-l.getDay())%7,x=Math.floor((t.getTime()-l.getTime())/(1e3*60*60*24)),i=P(l,Math.min(m,x));let c=new Date(l);for(;c<=i;)o.push(new Date(c)),c=P(c,1);n.push(o),l=P(i,1)}return n};function $e(){const e=se.c(57),{periodId:r}=re().props;let a;e[0]!==r?(a=V.find(v=>v.id===r)??V[0],e[0]=r,e[1]=a):a=e[1];const t=a,[n,l]=ne.useState(t.dailyExpenses);let o;e[2]!==t.endDate||e[3]!==t.startDate?(o=pe(t.startDate,t.endDate),e[2]=t.endDate,e[3]=t.startDate,e[4]=o):o=e[4];const K=o;let m;e[5]!==t.startDate?(m=Z(t.startDate),e[5]=t.startDate,e[6]=m):m=e[6];let x;e[7]!==t.endDate?(x=Z(t.endDate),e[7]=t.endDate,e[8]=x):x=e[8];const i=`${m} — ${x}`;let c;e[9]!==t.endDate||e[10]!==t.startDate?(c=xe(t.startDate,t.endDate),e[9]=t.endDate,e[10]=t.startDate,e[11]=c):c=e[11];const A=`${K} дней · ${c}`;let _;e[12]!==t.endDate||e[13]!==t.startDate?(_=fe(t.startDate,t.endDate),e[12]=t.endDate,e[13]=t.startDate,e[14]=_):_=e[14];const p=_;let M;e[15]===Symbol.for("react.memo_cache_sentinel")?(M={title:"Dashboard",href:de().url},e[15]=M):M=e[15];const O=`/periods/${t.id}`;let h;e[16]!==i||e[17]!==O?(h={title:i,href:O},e[16]=i,e[17]=O,e[18]=h):h=e[18];const U=`/periods/${t.id}/daily`;let f;e[19]!==U?(f={title:"Ежедневные траты",href:U},e[19]=U,e[20]=f):f=e[20];let E;e[21]!==f||e[22]!==h?(E=[M,h,f],e[21]=f,e[22]=h,e[23]=E):E=e[23];const W=E,z=`Ежедневные траты · ${i}`;let u;e[24]!==z?(u=s.jsx(le,{title:z}),e[24]=z,e[25]=u):u=e[25];let T,I;e[26]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-3xl bg-aurora opacity-35 dark:hidden"}),I=s.jsx("div",{className:"pointer-events-none absolute inset-0 hidden rounded-3xl bg-aurora-night opacity-45 dark:block"}),e[26]=T,e[27]=I):(T=e[26],I=e[27]);let L;e[28]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-[#6a5d52] dark:text-white/60",children:"Ежедневные траты"}),e[28]=L):L=e[28];let g;e[29]!==i?(g=s.jsx("h1",{className:"mt-3 font-display text-3xl",children:i}),e[29]=i,e[30]=g):g=e[30];let b;e[31]!==A?(b=s.jsx("p",{className:"mt-2 text-sm text-[#6a5d52] dark:text-white/70",children:A}),e[31]=A,e[32]=b):b=e[32];let D;e[33]!==g||e[34]!==b?(D=s.jsxs("div",{children:[L,g,b]}),e[33]=g,e[34]=b,e[35]=D):D=e[35];const B=`/periods/${t.id}`;let y;e[36]!==B?(y=s.jsx(oe,{href:B,className:"rounded-full border border-black/10 bg-white/80 px-4 py-2 text-xs text-[#1c1a17] shadow-[0_16px_32px_-24px_rgba(28,26,23,0.6)] transition hover:-translate-y-0.5 dark:border-white/10 dark:bg-white/10 dark:text-white",children:"← К периоду"}),e[36]=B,e[37]=y):y=e[37];let w;e[38]!==D||e[39]!==y?(w=s.jsxs("section",{className:"relative z-10 flex flex-wrap items-center justify-between gap-6",children:[D,y]}),e[38]=D,e[39]=y,e[40]=w):w=e[40];let R;e[41]===Symbol.for("react.memo_cache_sentinel")?(R=ce(120),e[41]=R):R=e[41];let k;if(e[42]!==n||e[43]!==p){let v;e[45]!==n||e[46]!==p.length?(v=(F,q)=>{const ee=q===p.length-1,G=F.reduce((S,N)=>S+(n[H(N)]||0),0),J=F.filter(S=>n[H(S)]!==void 0).length,te=J>0?G/J:0;return s.jsxs("div",{className:`rounded-2xl border border-black/10 bg-white/80 p-4 text-sm shadow-[0_18px_36px_-26px_rgba(28,26,23,0.5)] dark:border-white/10 dark:bg-white/10 max-sm:min-h-[calc(100vh-320px)] max-sm:snap-start max-sm:mb-2 ${ee?"max-sm:mb-24":""}`,children:[s.jsx("div",{className:"grid gap-3",children:F.map(S=>{const N=H(S);return s.jsxs("div",{className:"grid gap-2",children:[s.jsx("span",{className:"text-xs text-[#6a5d52] dark:text-white/60",children:he(S)}),s.jsx("input",{type:"number",min:0,value:n[N]??"",onChange:Q=>l(ae=>{const C={...ae};return Q.target.value===""?delete C[N]:C[N]=Number(Q.target.value),C}),className:"no-spin rounded-2xl border border-black/10 bg-white/90 px-3 py-2 text-sm text-right tabular-nums dark:border-white/10 dark:bg-white/10"})]},N)})}),s.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2 rounded-2xl border border-dashed border-black/10 bg-white/70 px-3 py-2 text-xs dark:border-white/10 dark:bg-white/5",children:[s.jsx("span",{children:"Итого за неделю"}),s.jsx("span",{className:"font-display text-sm tabular-nums text-[#b0352b] dark:text-[#ff8b7c]",children:X(G)}),s.jsx("span",{className:"text-[#6a5d52] dark:text-white/60",children:"Среднее в день"}),s.jsx("span",{className:"font-display text-sm tabular-nums",children:X(te)})]})]},`${F[0]?.toISOString()??q}`)},e[45]=n,e[46]=p.length,e[47]=v):v=e[47],k=p.map(v),e[42]=n,e[43]=p,e[44]=k}else k=e[44];let $;e[48]!==k?($=s.jsx("section",{className:"relative z-10 grid gap-4 animate-reveal",style:R,children:s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 max-sm:snap-y max-sm:snap-mandatory max-sm:overflow-y-auto max-sm:max-h-[calc(100vh-200px)] max-sm:pb-8 max-sm:pr-1",children:k})}),e[48]=k,e[49]=$):$=e[49];let j;e[50]!==w||e[51]!==$?(j=s.jsxs("div",{className:"relative flex flex-1 flex-col gap-8 overflow-x-hidden rounded-xl p-6 font-body text-[#1c1a17] dark:text-[#f7f3ee]",children:[T,I,w,$]}),e[50]=w,e[51]=$,e[52]=j):j=e[52];let Y;return e[53]!==W||e[54]!==u||e[55]!==j?(Y=s.jsxs(ie,{breadcrumbs:W,children:[u,j]}),e[53]=W,e[54]=u,e[55]=j,e[56]=Y):Y=e[56],Y}export{$e as default};
